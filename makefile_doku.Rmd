---
title: "makefile Tutorial"
author: "Manuel Reif"
date: "07. Jänner 2016"
output: html_document
---

Um seine eigenen Daten Analysen nachvollziehbar zu machen, Stichwort: 'reproducible research', ist es hilfreich bestimmte Tools zu verwenden. Mit 'reproducible research' sind in diesem Dokument all jene Bestrebungen nach Nachvollziehbarkeit der Datenanalyse gemeint die über das klassische dokumentieren der Variablen und deren Ausprägungen hinausgehen.

- `knitr` wird verwendet um den Code mit dem Text direkt zu assoziieren - das heisst dass auf einen Blick ins .Rmd/.Rnw klar wird wie die Ergebnisse (Grafiken, Tabellen etc.) entstanden sind. 
- `git` wird verwendet um den Entstehungsprozess der Syntax/Text etc. files nachvollziehbar zu machen
- `makefiles` werden dazu verwendet um die einzelnen Syntaxfiles (bspw. .R/.tex files) und einzelnen Outputfiles miteinander zu verbinden, also die logische Abfolge des Syntaxdurchlaufs zu bestimmen, um zum gewünschten Ergebnis zu kommen. Im sogenannten `Makefile` sind jene Regeln und Abhängigkeiten definiert.


Dieses Tutorial ist vorwiegend dafür gedacht um Makefiles im Rahmen von R und \LaTeX zu verwenden.



### Wann sind Makfiles sinnvoll


Makefiles zu erstellen ist immer sinnvoll, aber insbesondere dann, wenn die Anzahl der zu verbindenden Syntaxfiles steigt, mehrere Outputs realisiert werden sollen (bspw. Grafiken/Bericht/Tabellen etc.) oder die Aufgaben auch von Dritten, die nicht ständig im Projekt sind, leicht zu bewältigen sein sollten. Der Vorteil ist, dass auch bei kleinen Projekten der administrative Aufwand von Makefiles nicht sehr hoch sind, vor allem dann wenn diese von Anfang an angelegt und erweitert werden.



## Aufbau von Makefiles

Ein Makefile ist folgendermaßen aufgebaut:

```
TARGET: Prerequisite1 Prerequisite2   
  Commands
```   

- Target: dieses file wird am Ende erzeugt - Targets enden immer mit einem Doppelpunkt
- Prerequisites: das sind files von denen die Entstehung von Target abhängt. Sind durch ein Leerzeichen getrennt!
- Commands: das ist die Syntax wie das Target erstellt wird. **MÜSSEN IMMER* mit einem **Tabulator** eingerückt sein. Leerzeichen funktionieren **NICHT**!


Wird ein file der **prerequisites** aktualisiert (bspw. ergänzt) und ist damit aktueller als das **target** wird bei einer Eingabe von `make` das Targetfile neu erzeugt mittels der unten stehenden **Commands**.


### 'automatic variables' zB: $@ etc... plus anwendungsbsp.


### was ist .PHONY plus Anwendungsbsp


### Argumente in R files in Kommandozeile setzen


### handling multiple targets


### klassische (minimale) uebersichtliche Templates zu LaTeX (pur), Rmd/Rnw, R, R und Rmd gemischt etc


### wie funktioniert code externalisation in knitr (finde ich recht praktisch) - weiss nicht ob das zu makefiles passt.











